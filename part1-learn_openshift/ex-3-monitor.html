
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Monitoring Â· Bring it all together on OpenShift 4 on IBM Cloud</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-prism/prism-tomorrow.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-collapsible-chapters/collapsible-chapters.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-hints/plugin-hints.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-back-to-top-button/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fancybox/jquery.fancybox.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fancybox/jquery.fancybox-buttons.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-web-header/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-codetabs/codetabs.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="ex-4-scale.html" />
    
    
    <link rel="prev" href="ex-2-log.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                        <b>1.1.</b>
                    
                    Introduction
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Getting Started</li>
        
        
    
        <li class="chapter " data-level="2.1" data-path="../getting-started/access_lab.html">
            
                <a href="../getting-started/access_lab.html">
            
                    
                        <b>2.1.</b>
                    
                    Access Lab
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="../getting-started/create_account.html">
            
                <a href="../getting-started/create_account.html">
            
                    
                        <b>2.2.</b>
                    
                    Join IBM Cloud
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="../getting-started/access_cluster.html">
            
                <a href="../getting-started/access_cluster.html">
            
                    
                        <b>2.3.</b>
                    
                    Access OpenShift Console
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.4" data-path="../getting-started/access_cluster_cli.html">
            
                <a href="../getting-started/access_cluster_cli.html">
            
                    
                        <b>2.4.</b>
                    
                    Connect to OpenShift with CLI
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Learning OpenShift 4</li>
        
        
    
        <li class="chapter " data-level="3.1" data-path="ex-1-deploy.html">
            
                <a href="ex-1-deploy.html">
            
                    
                        <b>3.1.</b>
                    
                    Deploying an App
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="ex-2-log.html">
            
                <a href="ex-2-log.html">
            
                    
                        <b>3.2.</b>
                    
                    Logging
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="3.3" data-path="ex-3-monitor.html">
            
                <a href="ex-3-monitor.html">
            
                    
                        <b>3.3.</b>
                    
                    Monitoring
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.4" data-path="ex-4-scale.html">
            
                <a href="ex-4-scale.html">
            
                    
                        <b>3.4.</b>
                    
                    Scaling the App
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">OpenShift 4 and IBM Cloud</li>
        
        
    
        <li class="chapter " data-level="4.1" data-path="../part2-openshift_ibmcloud/exercise-5.html">
            
                <a href="../part2-openshift_ibmcloud/exercise-5.html">
            
                    
                        <b>4.1.</b>
                    
                    Cloudant with OperatorHub
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.2" data-path="../part2-openshift_ibmcloud/exercise-6.html">
            
                <a href="../part2-openshift_ibmcloud/exercise-6.html">
            
                    
                        <b>4.2.</b>
                    
                    Configure Sysdig Agent
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.3" data-path="../part2-openshift_ibmcloud/exercise-7.html">
            
                <a href="../part2-openshift_ibmcloud/exercise-7.html">
            
                    
                        <b>4.3.</b>
                    
                    Configure LogDNA Agent
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.4" data-path="../part2-openshift_ibmcloud/exercise-8.html">
            
                <a href="../part2-openshift_ibmcloud/exercise-8.html">
            
                    
                        <b>4.4.</b>
                    
                    Analyze Logs w/ LogDNA
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.5" data-path="../part2-openshift_ibmcloud/exercise-9.html">
            
                <a href="../part2-openshift_ibmcloud/exercise-9.html">
            
                    
                        <b>4.5.</b>
                    
                    Monitor Cluster w/ SysDig
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Resources</li>
        
        
    
        <li class="chapter " data-level="5.1" >
            
                <a target="_blank" href="https://cloud.ibm.com/docs/openshift">
            
                    
                        <b>5.1.</b>
                    
                    Doc: OpenShift on IBM Cloud
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.2" >
            
                <a target="_blank" href="https://docs.openshift.com/container-platform/4.8">
            
                    
                        <b>5.2.</b>
                    
                    Doc: OpenShift Container Platform 4.8
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Monitoring</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="monitoring">Monitoring</h1>
<p>In this section, you will learn to monitor the health and performance of your application. OpenShift Container Platform ships with a pre-configured and self-updating monitoring stack that is based on the Prometheus open source project and its wider eco-system. It provides monitoring of cluster components and ships with a set of Grafana dashboards</p>
<h2 id="access-prometheus">Access Prometheus</h2>
<ol>
<li><p>In the <strong>Developer</strong> perspective, go to the <strong>Monitoring Dashboard</strong> to review the CPU, Memory usage and more</p>
<p>      <a href="../assets/ocp-monitoring-dashboard.png" rel="grouped" title="Monitoring Dashboard" target="_self" class="fancybox">
       <img src="../assets/ocp-monitoring-dashboard.png" alt="Monitoring Dashboard">
     </a></p>
</li>
<li><p>Let&apos;s re-use the same commmand we load in the section before to generate some requests, this will in turn generate data into Prometheus.</p>
<p> ```sh
 while sleep 1; do curl -s <a href="http://$HOST/info" target="_blank">http://$HOST/info</a>; done</p>
</li>
<li><p>Swith to the <code>Metrics</code> tab</p>
<p>      <a href="../assets/ocp-monitoring-metrics.png" rel="grouped" title="Metrics" target="_self" class="fancybox">
       <img src="../assets/ocp-monitoring-metrics.png" alt="Metrics">
     </a></p>
</li>
<li><p>Create a <code>custom Query</code> to see the total container cpu usage in seconds on a Graph.</p>
<pre class="language-"><code class="lang-sh"> sum<span class="token punctuation">(</span>node_namespace_pod_container:container_cpu_usage_seconds_total:sum_rate<span class="token punctuation">{</span>namespace<span class="token operator">=</span><span class="token string">&quot;&lt;MYPROJECT&gt;&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span> by <span class="token punctuation">(</span>container<span class="token punctuation">)</span>
</code></pre>
</li>
<li><p>The following graph should appear</p>
<p>      <a href="../assets/ocp-monitoring-query.png" rel="grouped" title="Custom Query" target="_self" class="fancybox">
       <img src="../assets/ocp-monitoring-query.png" alt="Custom Query">
     </a></p>
</li>
<li><p>The <strong>Events</strong> view is useful for identifying the timeline of events and finding potential error messages. When tracking the state of a new rollout, managing existing assets, or even something simple like exposing a route, the Events view is critical in identifying the timeline of activity. This becomes even more useful when considering that multiple operators may be working against a single cluster.</p>
<p>      <a href="../assets/ocp-monitoring-events.png" rel="grouped" title="Monitoring Events" target="_self" class="fancybox">
       <img src="../assets/ocp-monitoring-events.png" alt="Monitoring Events">
     </a></p>
</li>
</ol>
<p>You&apos;ll want to refer to this view throughout the lab. Almost all actions we take in in OpenShift will result in an event being fired in this view. As it is updated real-time, it&apos;s a great way to track changes to state.</p>
<h2 id="access-grafana">Access Grafana</h2>
<p>Red Hat OpenShift on IBM Cloud comes with <a href="https://grafana.com/" target="_blank">Grafana</a> preinstalled.</p>
<ol>
<li><p>To retrieve the web UIs of Graphan, run the command</p>
<pre class="language-"><code class="lang-sh"> oc get routes -n openshift-monitoring <span class="token operator">|</span> <span class="token function">grep</span> grafana <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">&apos;{ print $2}&apos;</span>
</code></pre>
<p> You should be getting something similar to this</p>
<pre class="language-"><code class="lang-sh"> grafana-openshift-monitoring.labinabox-5c19b80d0b42bf06f50309d5c8a080e8-0000.eu-de.containers.appdomain.cloud
</code></pre>
</li>
<li><p>Open this url to launch the Grafana dashboard. You&apos;ll be asked to login with OpenShift and then click through some permissions.</p>
<p>      <a href="../assets/ocp-grafana-accept.png" rel="grouped" title="Monitoring Dashboards" target="_self" class="fancybox">
       <img src="../assets/ocp-grafana-accept.png" alt="Monitoring Dashboards">
     </a></p>
</li>
<li><p>In the Grafana dashboard, click the search icon in the left, and type <strong>Kubernetes / Compute Resources / Namespace (Pods)</strong>.</p>
<p>      <a href="../assets/ocp-grafana-search.png" rel="grouped" title="Grafana" target="_self" class="fancybox">
       <img src="../assets/ocp-grafana-search.png" alt="Grafana">
     </a></p>
</li>
<li><p>For the <strong>Namespace</strong> field, choose your project which is the name of the project your app resides in.</p>
</li>
<li><p>You should be able to see the CPU and Memory usage for your application.</p>
<p>      <a href="../assets/ocp-grafana-cpu.png" rel="grouped" title="Grafana also project" target="_self" class="fancybox">
       <img src="../assets/ocp-grafana-cpu.png" alt="Grafana also project">
     </a></p>
</li>
</ol>
<p>In production environments, this is helpful for identifying the average amount of CPU or Memory your application uses, especially as it can fluctuate through the day. We&apos;ll use this information in the next exercise to set up auto-scaling for our pods.</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="ex-2-log.html" class="navigation navigation-prev " aria-label="Previous page: Logging">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="ex-4-scale.html" class="navigation navigation-next " aria-label="Next page: Scaling the App">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Monitoring","level":"3.3","depth":1,"next":{"title":"Scaling the App","level":"3.4","depth":1,"path":"part1-learn_openshift/ex-4-scale.md","ref":"part1-learn_openshift/ex-4-scale.md","articles":[]},"previous":{"title":"Logging","level":"3.2","depth":1,"path":"part1-learn_openshift/ex-2-log.md","ref":"part1-learn_openshift/ex-2-log.md","articles":[]},"dir":"ltr"},"config":{"plugins":["prism","-highlight","collapsible-chapters","hints","copy-code-button","back-to-top-button","fancybox","web-header","codetabs"],"root":"workshop","styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"webheader":{"headerTitle":"Bring it all together on OpenShift 4 on IBM Cloud"},"prism":{"css":["prismjs/themes/prism-tomorrow.css"]},"fancybox":{"helpers":{"buttons":{}},"openEffect":"elastic","closeEffect":"elastic"},"web-header":{},"search":{},"collapsible-chapters":{},"codetabs":{},"hints":{"danger":"fa fa-exclamation-circle","info":"fa fa-info-circle","tip":"fa fa-mortar-board","working":"fa fa-wrench"},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"fontsettings":{"theme":"white","family":"sans","size":2},"back-to-top-button":{},"copy-code-button":{},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":true}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"Bring it all together on OpenShift 4 on IBM Cloud","gitbook":"3.2.3"},"file":{"path":"part1-learn_openshift/ex-3-monitor.md","mtime":"2021-12-08T08:03:30.332Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2021-12-08T08:05:16.808Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-collapsible-chapters/collapsible-chapters.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-copy-code-button/toggle.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-back-to-top-button/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fancybox/jquery.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fancybox/jquery.mousewheel.pack.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fancybox/jquery.fancybox.pack.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fancybox/jquery.fancybox-buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fancybox/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-web-header/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-codetabs/codetabs.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

